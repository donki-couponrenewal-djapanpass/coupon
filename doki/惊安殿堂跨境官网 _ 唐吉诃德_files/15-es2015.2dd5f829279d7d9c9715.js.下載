(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BhWd:function(t,n,e){"use strict";e.r(n),e.d(n,"DesktopIndexCouponPageModule",(function(){return Y}));var o=e("ofXK"),c=e("3Pt+"),i=e("Tx//"),r=e("TEn/"),s=e("PCNd"),a=e("tyNb"),p=e("mrSG"),d=e("Qyje"),g=e("AytR"),l=e("0bRG"),u=e("gkqj"),b=e("nYR2"),f=e("fXoL"),C=e("bUwk"),h=e("BibD"),O=e("XQWq"),P=e("wtyh"),_=e("QTi6"),m=e("ZQus"),M=e("C2AL"),v=e("FwiY"),x=e("OzZK"),y=e("RwU8"),T=e("qAZ0"),S=e("sYmb");function w(t,n){1&t&&(f.bc(0,"span"),f.Rc(1,"\uff1a"),f.ac())}function L(t,n){1&t&&f.Wb(0,"i",12)}function E(t,n){if(1&t){const t=f.cc();f.bc(0,"div",8),f.bc(1,"div",9),f.jc("click",(function(){f.Gc(t);const e=n.$implicit;return f.mc().toPage(e)})),f.Rc(2),f.nc(3,"translate"),f.Pc(4,w,2,0,"span",10),f.Pc(5,L,1,0,"i",11),f.ac(),f.ac()}if(2&t){const t=n.$implicit,e=n.index,o=f.mc();f.Db(1),f.uc("ngClass",0===e?"":"p-item"),f.Db(1),f.Sc(f.oc(3,4,t.label)),f.Db(2),f.uc("ngIf",0===e),f.Db(1),f.uc("ngIf",0!==e&&e!==o.positionConfig.length-1)}}function I(t,n){1&t&&(f.bc(0,"div",32),f.Rc(1),f.nc(2,"translate"),f.Wb(3,"i"),f.ac()),2&t&&(f.Db(1),f.Tc(" ",f.oc(2,1,"COMMON.COUPON_TITLE_007"),""))}function D(t,n){1&t&&(f.bc(0,"div",33),f.Rc(1),f.nc(2,"translate"),f.Wb(3,"i"),f.ac()),2&t&&(f.Db(1),f.Tc(" ",f.oc(2,1,"COMMON.COUPON_TITLE_008"),""))}function N(t,n){1&t&&(f.bc(0,"span"),f.Rc(1),f.nc(2,"translate"),f.ac()),2&t&&(f.Db(1),f.Sc(f.oc(2,1,"COMMON.COUPON_BUTTON_001")))}function k(t,n){1&t&&f.Wb(0,"span")}function R(t,n){if(1&t){const t=f.cc();f.bc(0,"div",17),f.bc(1,"div",18),f.bc(2,"div",19),f.Wb(3,"img",20),f.Pc(4,I,4,3,"div",21),f.Pc(5,D,4,3,"div",22),f.ac(),f.bc(6,"div",23),f.bc(7,"div",24),f.Rc(8),f.ac(),f.bc(9,"div",25),f.Rc(10),f.nc(11,"translate"),f.ac(),f.bc(12,"div",26),f.bc(13,"span",27),f.Rc(14),f.nc(15,"translate"),f.ac(),f.Rc(16),f.ac(),f.ac(),f.bc(17,"div",28),f.bc(18,"div",29),f.Rc(19),f.bc(20,"span",30),f.Rc(21),f.nc(22,"translate"),f.ac(),f.ac(),f.bc(23,"button",31),f.jc("click",(function(){f.Gc(t);const e=n.$implicit;return f.mc(3).getCounpon(e.cardId)})),f.Pc(24,N,3,3,"span",10),f.Pc(25,k,1,0,"span",10),f.ac(),f.ac(),f.ac(),f.ac()}if(2&t){const t=n.$implicit,e=f.mc(3);f.Db(3),f.uc("src",t.logoUrl,f.Ic)("alt",t.title),f.Db(1),f.uc("ngIf","GENERAL_COUPON_NEW"===t.cardType),f.Db(1),f.uc("ngIf","GENERAL_COUPON_OLD"===t.cardType),f.Db(3),f.Sc(t.title),f.Db(2),f.Sc(f.pc(11,14,"COMMON.COUPON_ENOUGH",t.price)),f.Db(4),f.Sc(f.oc(15,17,"COMMON.COUPON_TITLE_006")),f.Db(2),f.Uc(" ",t.beginDateTime,"~",t.endDateTime," "),f.Db(3),f.Sc(t.reduceCostJpy),f.Db(2),f.Sc(f.oc(22,19,"RATEUNIT.JPY")),f.Db(2),f.uc("nzLoading",e.getting),f.Db(1),f.uc("ngIf",!e.getting),f.Db(1),f.uc("ngIf",e.getting)}}function U(t,n){if(1&t&&(f.bc(0,"div",15),f.Pc(1,R,26,21,"div",16),f.ac()),2&t){const t=f.mc(2);f.Db(1),f.uc("ngForOf",t.counponList)}}function z(t,n){if(1&t&&(f.bc(0,"div",13),f.Pc(1,U,2,1,"div",14),f.ac()),2&t){const t=f.mc(),n=f.Ec(9);f.Db(1),f.uc("ngIf",t.counponList.length>0)("ngIfElse",n)}}function A(t,n){1&t&&(f.bc(0,"div",34),f.Wb(1,"nz-spin",35),f.ac())}function G(t,n){1&t&&(f.bc(0,"div",34),f.Rc(1),f.nc(2,"translate"),f.ac()),2&t&&(f.Db(1),f.Tc(" ",f.oc(2,1,"UNIT.EMPTYDATA")," "))}const W=[{path:"",component:(()=>{class t{constructor(t,n,e,o,c,i,r){this.httpService=t,this.router=n,this.localService=e,this.tokenService=o,this.toolService=c,this.datepipe=i,this.windowService=r,this.positionConfig=[{label:"PC.ORDER_DETAIL_POSITION"},{label:"COMMON.PAGE_HOME",router:"/desktop/home"},{label:"PC.NAVLIST_NAV005"}],this.count=0,this.getCout=0,this.counponList=[],this.rate=0,this.sortBar=!1}get loading(){return this.count>0}get getting(){return this.getCout>0}ngOnInit(){return Object(p.a)(this,void 0,void 0,(function*(){this.rate=yield this.localService.getRate(),this.getCounponList()}))}ngAfterViewInit(){this.windowService.getWindow().addEventListener("scroll",this.toggleKeywords.bind(this))}getCounponList(){this.count++;const t={mchGroupId:g.a.mchGroupId,mchCode:g.a.mchCode,countryCode:this.localService.getCountryCode(),languageCode:this.localService.getLanguageCode(),userId:this.tokenService.get().userId,couponFlag:"0"};this.httpService.interceptorPost(u.a.api.coupon.GET_INDEX_COUPONS,d.stringify(t)).pipe(Object(b.a)(()=>this.count--)).subscribe(t=>{"SUCCESS"===t.return_code&&"SUCCESS"===t.result_code&&this.renderCounponList(t.data)})}toggleKeywords(){const t=this.windowService.getDocument().getElementById("desktop-search-bar");this.toolService.isEmpty(t)||(t.offsetTop>0?(this.sortBar=!0,t.className="desktop-search-bar search-bar-bgColor-op9"):(this.sortBar=!1,t.className="desktop-search-bar search-bar-bgColor"))}renderCounponList(t){let n=[];const e=t.filter(t=>"GENERAL_COUPON_NEW"===t.cardType||"GENERAL_COUPON_OLD"===t.cardType),o=t.filter(t=>"GENERAL_COUPON"===t.cardType);n=e.concat(o),n.forEach(t=>{t.price={money:t.leastCostJpy},t.endDateTime=this.datepipe.transform(t.endDateTime.replace(/-/g,"/"),"yyyy-MM-dd HH:mm:ss"),t.beginDateTime=this.datepipe.transform(t.beginDateTime.replace(/-/g,"/"),"yyyy-MM-dd HH:mm:ss")}),this.counponList=n}getCounpon(t){this.getCout++;const n={mchGroupId:g.a.mchGroupId,mchCode:g.a.mchCode,userId:this.tokenService.get().userId,cardId:t,countryCode:this.localService.getCountryCode()};this.httpService.interceptorPost(u.a.api.coupon.EXCHANGE_COUPON,d.stringify(n)).pipe(Object(b.a)(()=>this.getCout--)).subscribe(t=>{"SUCCESS"===t.return_code&&"SUCCESS"===t.result_code&&(this.toolService.showSuccess("COMMON.COUPON_TIPS_001"),this.getedCallback())})}getedCallback(){this.getCounponList()}toPage(t){t.router&&this.router.navigate([t.router])}calculateRefreencePrice(t){return(this.rate*parseFloat(t)).toFixed(2)}}return t.\u0275fac=function(n){return new(n||t)(f.Vb(C.a),f.Vb(a.f),f.Vb(h.a),f.Vb(l.a),f.Vb(O.a),f.Vb(o.e),f.Vb(P.a))},t.\u0275cmp=f.Pb({type:t,selectors:[["app-desktop-index-coupon"]],features:[f.Cb([o.e])],decls:11,vars:4,consts:[["id","desktop-search-bar",1,"desktop-search-bar","search-bar-bgColor"],[3,"sortBar"],[1,"content","defaultWidth"],[1,"position","flex"],["class","position-item",4,"ngFor","ngForOf"],["class","counponList",4,"ngIf","ngIfElse"],["loadingBlock",""],["emptyBlock",""],[1,"position-item"],[3,"ngClass","click"],[4,"ngIf"],["nz-icon","","nzType","right","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","right","nzTheme","outline"],[1,"counponList"],["class","counpon-list-content flex",4,"ngIf","ngIfElse"],[1,"counpon-list-content","flex"],["class","counpon-item",4,"ngFor","ngForOf"],[1,"counpon-item"],[1,"items","flex"],[1,"left"],[3,"src","alt"],["class","cardType new",4,"ngIf"],["class","cardType old",4,"ngIf"],[1,"center"],[1,"title"],[1,"least"],[1,"date"],[1,"text"],[1,"right"],[1,"yh"],[1,"unit","f13"],["nz-button","","nzType","default","nzShape","round",1,"btn",3,"nzLoading","click"],[1,"cardType","new"],[1,"cardType","old"],[1,"tips"],["nzSimple",""]],template:function(t,n){if(1&t&&(f.bc(0,"div",0),f.Wb(1,"app-desktop-search-bar",1),f.ac(),f.bc(2,"div",2),f.bc(3,"div",3),f.Pc(4,E,6,6,"div",4),f.ac(),f.Pc(5,z,2,2,"div",5),f.ac(),f.Pc(6,A,2,0,"ng-template",null,6,f.Qc),f.Pc(8,G,3,3,"ng-template",null,7,f.Qc),f.Wb(10,"app-desktop-site-footer")),2&t){const t=f.Ec(7);f.Db(1),f.uc("sortBar",n.sortBar),f.Db(3),f.uc("ngForOf",n.positionConfig),f.Db(1),f.uc("ngIf",!n.loading)("ngIfElse",t)}},directives:[_.a,o.l,o.m,m.a,o.k,M.a,v.b,x.a,y.a,T.a],pipes:[S.d],styles:[".content[_ngcontent-%COMP%]{margin-top:20px}.position[_ngcontent-%COMP%]   .position-item[_ngcontent-%COMP%]{color:#666}.position[_ngcontent-%COMP%]   .position-item[_ngcontent-%COMP%]:hover{color:#f75500;text-decoration:underline;cursor:pointer}.position[_ngcontent-%COMP%]   .position-item[_ngcontent-%COMP%]:first-child{color:#333}.position[_ngcontent-%COMP%]   .position-item[_ngcontent-%COMP%]:first-child:hover{color:#333;text-decoration:none;cursor:auto}.tips[_ngcontent-%COMP%]{margin-top:40px}.tips[_ngcontent-%COMP%], nz-spin[_ngcontent-%COMP%]{text-align:center}nz-spin[_ngcontent-%COMP%]{padding-top:20px}.counponList[_ngcontent-%COMP%]{margin:20px 0 50px}.counponList[_ngcontent-%COMP%]   .counpon-list-content[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}.counponList[_ngcontent-%COMP%]   .counpon-item[_ngcontent-%COMP%]{width:calc(50% - 30px);margin-bottom:20px}.counponList[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:20%;border-top-left-radius:5px;border-bottom-left-radius:5px;background:#f6f6f6;position:relative}.counponList[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;border-radius:50%;position:absolute;top:50%;left:50%;transform:translateY(-50%);margin-left:-25px}.counponList[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .cardType[_ngcontent-%COMP%]{font-size:12px;background:#fff;box-shadow:-5px 4px 4px -3px #a9a9a9;padding:5px;position:absolute;top:7px;width:100%}.counponList[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .cardType[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:0;height:0;border-top:14px solid transparent;border-right:12px solid #f6f6f6;border-bottom:14px solid transparent;right:0;top:0;z-index:10}.counponList[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .cardType.new[_ngcontent-%COMP%]{color:#0fd59d}.counponList[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .cardType.old[_ngcontent-%COMP%]{color:#f75500}.counponList[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{width:50%;background:#f6f6f6;padding:10px}.counponList[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:17px;color:#f75500;padding-bottom:5px;overflow:hidden;text-overflow:ellipsis;display:-moz-box;display:-webkit-box;-webkit-line-clamp:1;height:32px;-webkit-box-orient:vertical}.counponList[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .least[_ngcontent-%COMP%]{font-size:13px;color:#333}.counponList[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:small;color:#999;word-wrap:normal}.counponList[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:30%;border-top-right-radius:5px;border-bottom-right-radius:5px;background:#f75500;text-align:center;cursor:pointer}.counponList[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .yh[_ngcontent-%COMP%]{margin-top:10px;font-size:22px;color:#fff;font-weight:800}.counponList[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#fff;background:transparent;border:1px solid #fff;padding:2px 0;font-size:12px;text-align:center;border-radius:10px;width:66%;height:22px;margin:5px auto 0}"]}),t})()}];let B=(()=>{class t{}return t.\u0275mod=f.Tb({type:t}),t.\u0275inj=f.Sb({factory:function(n){return new(n||t)},imports:[[a.i.forChild(W)],a.i]}),t})();var j=e("3/1E"),F=e("B+r4"),V=e("yNE/"),H=e("yW9e"),Q=e("xAvK");let Y=(()=>{class t{}return t.\u0275mod=f.Tb({type:t}),t.\u0275inj=f.Sb({factory:function(n){return new(n||t)},imports:[[o.c,c.j,r.E,B,i.a,s.a,j.b,F.b,V.a,H.a,Q.DesktopHomePageModule]]}),t})()}}]);